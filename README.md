# qrcode49

`qrcode49` 是一个面向技术用户的简体中文二维码命令行工具。

它只做两件事：

- 文本文件 -> 二维码图片
- 二维码图片 -> 文本文件

项目遵循“出错直接抛异常”的风格，不做过度防御。

## 安装

### 方式一：作为 uv tool 安装（推荐）

```bash
uv tool install --from . qrcode49
```

安装后可直接执行：

```bash
qrcode49 参数1 参数2 参数3
```

### 方式二：在仓库内直接运行

```bash
uv run qrcode49 参数1 参数2 参数3
```

## 命令规则

固定格式：

```bash
qrcode49 参数1 参数2 参数3
```

模式由 `参数1` 后缀自动判断：

- `参数1` 为 `.md` 或 `.txt`：进入“生成二维码”模式
- `参数1` 为 `.jpg`、`.png`、`.webp`：进入“解析二维码”模式

## 参数说明

### 1) 生成二维码模式

- `参数1`：已有文本文件路径（仅 `.md/.txt`）
- `参数2`：输出二维码路径（仅 `.jpg/.png/.webp`）
- `参数3`：可选，图片边长，纯数字正整数，默认 `512`

规则：

- `参数1` 必须存在
- `参数2` 不存在则新建
- `参数2` 已存在则询问是否覆盖（`y/N`）

### 2) 解析二维码模式

- `参数1`：已有二维码图片路径（仅 `.jpg/.png/.webp`）
- `参数2`：输出文本路径（仅 `.md/.txt`）
- `参数3`：禁止提供

规则：

- `参数1` 必须存在
- `参数2` 不存在则新建
- `参数2` 已存在则询问是否覆盖（`y/N`）

## 编码与错误策略

- 文本读取和写入均强制 `UTF-8`
- 非 `UTF-8` 文本会直接抛出 `UnicodeDecodeError`
- 参数数量错误、后缀错误、模式冲突等会直接抛出 `ValueError`

## 示例

```bash
# 文本 -> 二维码（默认边长 512）
qrcode49 ./demo/input.txt ./demo/code.png

# 文本 -> 二维码（自定义边长）
qrcode49 ./demo/input.md ./demo/code.webp 768

# 二维码 -> 文本
qrcode49 ./demo/code.webp ./demo/decoded.txt
```

## 卸载

```bash
uv tool uninstall qrcode49
```

## 许可证

本项目使用 MIT License。完整条款见 `License`。
